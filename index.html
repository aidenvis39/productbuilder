<!doctype html>
<html lang="ko" data-theme="light">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>로또 번호 추첨기</title>
    <style>
      :root {
        color-scheme: light dark;
        --bg: radial-gradient(circle at top, #fff8e7, #f6f1e6 45%, #e9e3d8);
        --panel: #fffdf7;
        --panel-border: #e3dccd;
        --text: #1b1a17;
        --muted: #4a453f;
        --accent: #c3582f;
        --accent-shadow: rgba(195, 88, 47, 0.35);
        --ball-bg: #ffe9b5;
        --ball-border: #e1c477;
        --ball-text: #6d4d1a;
        --bonus-bg: #ffd1c2;
        --bonus-border: #f1a48c;
        --bonus-text: #7b2f1c;
      }
      [data-theme="dark"] {
        --bg: radial-gradient(circle at top, #27231f, #1b1815 55%, #151311);
        --panel: #201c18;
        --panel-border: #3a332c;
        --text: #f6f1e7;
        --muted: #c6bdb2;
        --accent: #f1a069;
        --accent-shadow: rgba(241, 160, 105, 0.35);
        --ball-bg: #3b2a1a;
        --ball-border: #6a4a2a;
        --ball-text: #f3d6a3;
        --bonus-bg: #4a2420;
        --bonus-border: #8d4a38;
        --bonus-text: #f5bfa8;
      }
      body {
        margin: 0;
        font-family: "Noto Sans KR", "Malgun Gothic", "Apple SD Gothic Neo", sans-serif;
        background: var(--bg);
        color: var(--text);
        transition: background 200ms ease, color 200ms ease;
      }
      .wrap {
        max-width: 840px;
        margin: 40px auto;
        padding: 24px;
      }
      header {
        display: flex;
        flex-direction: column;
        gap: 8px;
        margin-bottom: 24px;
      }
      h1 {
        font-size: 32px;
        margin: 0;
        letter-spacing: -0.02em;
      }
      p {
        margin: 0;
        color: var(--muted);
      }
      .panel {
        background: var(--panel);
        border: 1px solid var(--panel-border);
        border-radius: 16px;
        padding: 24px;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
      }
      .controls {
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 16px;
      }
      .actions {
        display: flex;
        flex-wrap: wrap;
        gap: 12px;
        align-items: center;
      }
      button {
        background: var(--accent);
        color: #fff;
        border: none;
        border-radius: 999px;
        padding: 12px 18px;
        font-size: 16px;
        cursor: pointer;
        transition: transform 120ms ease, box-shadow 120ms ease;
      }
      button:hover {
        transform: translateY(-1px);
        box-shadow: 0 8px 18px var(--accent-shadow);
      }
      button:active {
        transform: translateY(0);
      }
      .theme-toggle {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        background: transparent;
        border: 1px solid var(--panel-border);
        color: var(--text);
        padding: 10px 14px;
      }
      .theme-indicator {
        width: 18px;
        height: 18px;
        border-radius: 999px;
        background: var(--accent);
        display: inline-block;
      }
      .options {
        display: flex;
        gap: 16px;
        flex-wrap: wrap;
        color: var(--muted);
        font-size: 14px;
      }
      .options label {
        display: inline-flex;
        align-items: center;
        gap: 6px;
      }
      .numbers {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
        gap: 12px;
        margin-top: 16px;
      }
      .ball {
        height: 64px;
        border-radius: 999px;
        background: var(--ball-bg);
        border: 2px solid var(--ball-border);
        display: grid;
        place-items: center;
        font-size: 22px;
        font-weight: 700;
        color: var(--ball-text);
        opacity: 0;
        transform: translateY(6px) scale(0.98);
        animation: reveal 420ms ease forwards;
      }
      .bonus {
        background: var(--bonus-bg);
        border-color: var(--bonus-border);
        color: var(--bonus-text);
      }
      @keyframes reveal {
        to {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }
      footer {
        margin-top: 16px;
        font-size: 13px;
        color: var(--muted);
      }
      @media (max-width: 600px) {
        h1 {
          font-size: 26px;
        }
        .ball {
          height: 56px;
          font-size: 20px;
        }
        .controls {
          align-items: flex-start;
        }
      }
    </style>
  </head>
  <body>
    <div class="wrap">
      <header>
        <h1>로또 번호 추첨기</h1>
        <p>1부터 45까지의 숫자 중 중복 없이 6개를 뽑습니다.</p>
      </header>
      <section class="panel">
        <div class="controls">
          <div class="actions">
            <button id="drawButton" type="button">추첨하기</button>
            <button id="themeToggle" class="theme-toggle" type="button" aria-pressed="false">
              <span class="theme-indicator" aria-hidden="true"></span>
              <span id="themeLabel">라이트 모드</span>
            </button>
          </div>
          <div class="options">
            <label>
              <input id="sortToggle" type="checkbox" checked />
              오름차순 정렬
            </label>
            <label>
              <input id="bonusToggle" type="checkbox" />
              보너스 번호 포함
            </label>
          </div>
        </div>
        <div id="numbers" class="numbers" aria-live="polite"></div>
      </section>
      <footer>랜덤 추첨은 클라이언트에서만 동작합니다.</footer>
    </div>
    <script>
      const drawButton = document.getElementById("drawButton");
      const numbersEl = document.getElementById("numbers");
      const sortToggle = document.getElementById("sortToggle");
      const bonusToggle = document.getElementById("bonusToggle");
      const themeToggle = document.getElementById("themeToggle");
      const themeLabel = document.getElementById("themeLabel");
      const root = document.documentElement;

      function setTheme(theme) {
        root.setAttribute("data-theme", theme);
        localStorage.setItem("lotto-theme", theme);
        const isDark = theme === "dark";
        themeToggle.setAttribute("aria-pressed", isDark ? "true" : "false");
        themeLabel.textContent = isDark ? "다크 모드" : "라이트 모드";
      }

      const storedTheme = localStorage.getItem("lotto-theme");
      if (storedTheme) {
        setTheme(storedTheme);
      } else {
        const prefersDark = window.matchMedia("(prefers-color-scheme: dark)").matches;
        setTheme(prefersDark ? "dark" : "light");
      }

      function drawNumbers(count) {
        const pool = Array.from({ length: 45 }, (_, i) => i + 1);
        for (let i = pool.length - 1; i > 0; i -= 1) {
          const j = Math.floor(Math.random() * (i + 1));
          [pool[i], pool[j]] = [pool[j], pool[i]];
        }
        return pool.slice(0, count);
      }

      function renderNumbers(numbers, bonusIncluded) {
        numbersEl.innerHTML = "";
        const main = bonusIncluded ? numbers.slice(0, 6) : numbers;
        const bonus = bonusIncluded ? numbers[6] : null;
        const display = sortToggle.checked ? [...main].sort((a, b) => a - b) : main;
        display.forEach((num, index) => {
          const ball = document.createElement("div");
          ball.className = "ball";
          ball.style.animationDelay = `${index * 80}ms`;
          ball.textContent = num;
          numbersEl.appendChild(ball);
        });
        if (bonus !== null) {
          const ball = document.createElement("div");
          ball.className = "ball bonus";
          ball.style.animationDelay = `${display.length * 80}ms`;
          ball.textContent = bonus;
          numbersEl.appendChild(ball);
        }
      }

      function handleDraw() {
        const includeBonus = bonusToggle.checked;
        const numbers = drawNumbers(includeBonus ? 7 : 6);
        renderNumbers(numbers, includeBonus);
      }

      drawButton.addEventListener("click", handleDraw);
      themeToggle.addEventListener("click", () => {
        const nextTheme = root.getAttribute("data-theme") === "dark" ? "light" : "dark";
        setTheme(nextTheme);
      });

      handleDraw();
    </script>
  </body>
</html>
